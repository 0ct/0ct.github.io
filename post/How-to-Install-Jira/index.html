<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>安装 Jira 和 Confluence：安装 Jira - 問</title>
<link rel="shortcut icon" href="https://blog.decima.me/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://blog.decima.me/media/css/tailwind.css">
<link rel="stylesheet" href="https://blog.decima.me/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="安装 Jira 和 Confluence：安装 Jira - 問 - Atom Feed" href="https://blog.decima.me/atom.xml">

    

  <meta name="description" content="安装 Jira 和 Confluence：安装 Jira
一、安装前准备
1. 下载


下载 jira 和 confluence
https://product-downloads.atlassian.com/software/jira/..." />
  <meta property="og:title" content="安装 Jira 和 Confluence：安装 Jira - 問">
  <meta property="og:description" content="安装 Jira 和 Confluence：安装 Jira
一、安装前准备
1. 下载


下载 jira 和 confluence
https://product-downloads.atlassian.com/software/jira/..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://blog.decima.me/post/How-to-Install-Jira/" />
  <meta property="og:image" content="https://blog.decima.me/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="安装 Jira 和 Confluence：安装 Jira - 問">
  <meta name="twitter:description" content="安装 Jira 和 Confluence：安装 Jira
一、安装前准备
1. 下载


下载 jira 和 confluence
https://product-downloads.atlassian.com/software/jira/...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://blog.decima.me/post/How-to-Install-Jira/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  

  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://blog.decima.me" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      問
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          安装 Jira 和 Confluence：安装 Jira
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">2020-02-09 · 8 min read</div>
          
            <a href="https://blog.decima.me/tag/5Oo7OQpAZ/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              DevOps
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <h1 id="安装-jira-和-confluence安装-jira">安装 Jira 和 Confluence：安装 Jira</h1>
<p>一、安装前准备</p>
<h3 id="1-下载">1. 下载</h3>
<ul>
<li>
<p>下载 <a href="https://www.atlassian.com/software/jira/download">jira</a> 和 <a href="https://www.atlassian.com/zh/software/confluence/download">confluence</a></p>
<pre><code>https://product-downloads.atlassian.com/software/jira/downloads/atlassian-jira-software-8.13.3-x64.bin
https://product-downloads.atlassian.com/software/confluence/downloads/atlassian-confluence-7.4.7-x64.bin
</code></pre>
</li>
<li>
<p>上传到机器上</p>
</li>
</ul>
<h3 id="2-安装">2. 安装</h3>
<ul>
<li>
<p>安装 MySQL</p>
<p>使用 <a href="https://mirrors.tuna.tsinghua.edu.cn/help/mysql/">清华源</a></p>
<pre><code>vim /etc/yum.repos.d/mysql-community.repo
</code></pre>
<p>复制以下内容</p>
<pre><code>[mysql-5.7-community]
name=MySQL 5.7 Community Server
baseurl=https://mirrors.tuna.tsinghua.edu.cn/mysql/yum/mysql-5.7-community-el7-$basearch/
enabled=1
gpgcheck=1
gpgkey=https://repo.mysql.com/RPM-GPG-KEY-mysql
</code></pre>
<p>更新安装</p>
<pre><code>yum update
yum install mysql-serve
</code></pre>
</li>
<li>
<p>启动</p>
<pre><code>systemctl enable mysqld
systemctl start mysqld
</code></pre>
<p>获取密码</p>
<pre><code>cat /var/log/mysqld.log|grep 'A temporary password'
</code></pre>
<blockquote>
<p>2021-02-09T09:16:49.130708Z 1 [Note] A temporary password is generated for root@localhost: <code>oeo+zO#vl1D%</code></p>
<p>密码：oeo+zO#vl1D%</p>
</blockquote>
<pre><code>mysql -uroot -p
## 输入密码，输入时不提示
Enter password:
</code></pre>
</li>
<li>
<p>修改密码</p>
<p>登录后需要先修改密码才能进行其他操作</p>
<pre><code>mysql&gt; create database jira default character set utf8mb4 collate utf8mb4_general_ci;
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
mysql&gt; update user set password=PASSWORD(&quot;Admin&quot;) where user='root';
ERROR 1046 (3D000): No database selected
mysql&gt; show databases;
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
mysql&gt; use mysql
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
</code></pre>
<p>使用 ALTER USER 修改密码</p>
<pre><code>ALTER USER USER() IDENTIFIED BY 'Admin@123';
</code></pre>
</li>
<li>
<p>创建数据库</p>
<p>创建 jira 和 confluence 数据库</p>
<pre><code>CREATE DATABASE jira DEFAULT character SET utf8mb4 COLLATE utf8mb4_general_ci;
CREATE DATABASE confluence DEFAULT character SET utf8mb4 COLLATE utf8mb4_general_ci;
</code></pre>
<p>修改密码用户密码</p>
<pre><code>GRANT ALL ON jira.* TO 'jira' @ '%' IDENTIFIED BY 'Admin@123';
GRANT ALL ON confluence.* TO 'confluence' @ '%' IDENTIFIED BY 'Admin@123';
</code></pre>
<p>查看数据库及用户</p>
<pre><code>SELECT
	USER,
	host
FROM
	mysql.user;
</code></pre>
<pre><code>+---------------+-----------+
| user          | host      |
+---------------+-----------+
| confluence    | %         |
| jira          | %         |
| root          | %         |
| mysql.session | localhost |
| mysql.sys     | localhost |
+---------------+-----------+
5 rows in set (0.00 sec)
</code></pre>
<pre><code>SHOW databases;
</code></pre>
<pre><code>+--------------------+
| Database           |
+--------------------+
| information_schema |
| confluence         |
| jira               |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
6 rows in set (0.00 sec)
</code></pre>
<p>修改 <a href="https://confluence.atlassian.com/adminjiraserver0813/connecting-jira-applications-to-mysql-5-7-1027137456.html">my.cnf</a>，在 <code>[mysqld]</code>下添加</p>
<pre><code>default-storage-engine=INNODB
character_set_server=utf8mb4
innodb_default_row_format=DYNAMIC
innodb_large_prefix=ON
innodb_file_format=Barracuda
innodb_log_file_size=2G
## 如果有这条，注释或删除
// remove this if it exists
sql_mode = NO_AUTO_VALUE_ON_ZERO
</code></pre>
<p>重启 mysql</p>
<pre><code>systemctl restart mysqld
</code></pre>
</li>
<li>
<p>安装 jira</p>
<p>创建文件夹</p>
<pre><code>cd /usr/local
mkdir jira
cd jira
mv ~/atlassian-jira-software-8.13.3-x64.bin .
## 需要有执行权限
chmod +x atlassian-jira-software-8.13.3-x64.bin 
./atlassian-jira-software-8.13.3-x64.bin 
</code></pre>
<p>执行上一条 命令后出现以下提示</p>
<pre><code>Unpacking JRE ...
Starting Installer ...

This will install Jira Software 8.13.3 on your computer.
OK [o, Enter], Cancel [c]
o ## 输入 o
Click Next to continue, or Cancel to exit Setup.

Choose the appropriate installation or upgrade option.
Please choose one of the following:
Express Install (use default settings) [1], Custom Install (recommended for advanced users) [2, Enter], Upgrade an existing Jira installation [3]
1 ## 输入 1

Details on where Jira Software will be installed and the settings that will be used.
Installation Directory: /opt/atlassian/jira 
Home Directory: /var/atlassian/application-data/jira 
HTTP Port: 8080 
RMI Port: 8005 
Install as service: Yes 
Install [i, Enter], Exit [e]
i ## 输入 i

Extracting files ...
                                                                           

Please wait a few moments while Jira Software is configured.

Installation of Jira Software 8.13.3 is complete
Start Jira Software 8.13.3 now?
Yes [y, Enter], No [n]
y ## 输入 y

Please wait a few moments while Jira Software starts up.
Launching Jira Software ...

Installation of Jira Software 8.13.3 is complete
Your installation of Jira Software 8.13.3 is now ready and can be accessed
via your browser.
Jira Software 8.13.3 can be accessed at http://localhost:8080
Finishing installation ...
</code></pre>
<p>查看进程</p>
<pre><code>[root@localhost local]# netstat -natlup
Active Internet connections (servers and established)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name    
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      1041/sshd           
tcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1436/master         
tcp        0      0 192.168.99.109:22       192.168.99.200:57061    ESTABLISHED 1545/sshd: root@not 
tcp        0      0 192.168.99.109:22       192.168.99.200:57054    ESTABLISHED 1519/sshd: root@pts 
tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      2080/java           
tcp6       0      0 :::3306                 :::*                    LISTEN      1701/mysqld         
tcp6       0      0 :::8080                 :::*                    LISTEN      2080/java           
tcp6       0      0 :::22                   :::*                    LISTEN      1041/sshd           
tcp6       0      0 ::1:25                  :::*                    LISTEN      1436/master 
[root@localhost local]# ps -ef |grep jira
jira      2080     1 40 17:46 ?        00:00:40 /opt/atlassian/jira/jre//bin/java -Djava.util.logging.config.file=/opt/atlassian/jira/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Xms384m -Xmx2048m -XX:InitialCodeCacheSize=32m -XX:ReservedCodeCacheSize=512m -Djava.awt.headless=true -Datlassian.standalone=JIRA -Dorg.apache.jasper.runtime.BodyContentImpl.LIMIT_BUFFER=true -Dmail.mime.decodeparameters=true -Dorg.dom4j.factory=com.atlassian.core.xml.InterningDocumentFactory -XX:-OmitStackTraceInFastThrow -Djava.locale.providers=COMPAT -Datlassian.plugins.startup.options= -Djdk.tls.ephemeralDHKeySize=2048 -Djava.protocol.handler.pkgs=org.apache.catalina.webresources -Dorg.apache.catalina.security.SecurityListener.UMASK=0027 -Xloggc:/opt/atlassian/jira/logs/atlassian-jira-gc-%t.log -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=20M -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCTimeStamps -XX:+PrintGCCause -XX:+ExplicitGCInvokesConcurrent -Dignore.endorsed.dirs= -classpath /opt/atlassian/jira/bin/bootstrap.jar:/opt/atlassian/jira/bin/tomcat-juli.jar -Dcatalina.base=/opt/atlassian/jira -Dcatalina.home=/opt/atlassian/jira -Djava.io.tmpdir=/opt/atlassian/jira/temp org.apache.catalina.startup.Bootstrap start
root      2188  1523  0 17:48 pts/0    00:00:00 grep --color=auto jira
</code></pre>
<ul>
<li>
<p>下载数据库连载工具</p>
<p>来源：<a href="https://support.atlassian.com/">Administering Jira applications Support</a> - <a href="https://confluence.atlassian.com/adminjiraserver/supported-platforms-938846830.html">Supported platforms</a></p>
<p><a href="https://dev.mysql.com/downloads/connector/j/5.1.html">MySQL Connector/J 5.1 driver</a></p>
<p>下载 <code>Platform Independent (Architecture Independent), Compressed TAR Archive (mysql-connector-java-5.1.49.tar.gz)</code></p>
<p>解压其中的<code>mysql-connector-java-5.1.49-bin.jar</code> 上传到机器 <code>~</code>下，然后复制到 jira 项目目录下</p>
<pre><code>cp ~/mysql-connector-java-5.1.49-bin.jar atlassian/jira/atlassian-jira/WEB-INF/lib/
</code></pre>
</li>
<li>
<p>重启</p>
</li>
<li>
<p>防火墙放行 及 重新加载</p>
<pre><code>firewall-cmd --zone=public --add-port=8080/tcp --permanent
firewall-cmd --reload

## 查看
firewall-cmd --zone=public --query-port=8080/tcp
</code></pre>
</li>
<li>
<p>重启服务</p>
</li>
</ul>
<pre><code>cd /opt/atlassian/jira/bin
sh shutdown.sh
sh startup.sh
</code></pre>
<ul>
<li>
<p>登录网页继续安装</p>
<pre><code>http://192.168.100.100:8080
</code></pre>
<ul>
<li>
<p>选择右上角的 Languages 可以将语言修改成 中文</p>
</li>
<li>
<p>选择 第二个 我将设置我自己</p>
</li>
<li>
<p>配置数据库，以此选择或填入</p>
<blockquote>
<ul>
<li>其他数据库</li>
<li>MySQL</li>
<li>127.0.0.1</li>
<li>192.168.100.100</li>
<li>3306</li>
<li>jira</li>
<li>root</li>
<li>Admin@123</li>
</ul>
</blockquote>
</li>
<li>
<p>点击下一步</p>
</li>
<li>
<p>设置应用程序的属性（此处默认或根据自己喜好修改）</p>
</li>
<li>
<p>填入许可证</p>
</li>
<li>
<p>设置管理员账号</p>
<blockquote>
<ul>
<li>root</li>
<li>root@admin.com</li>
<li>root</li>
<li>admin / admin</li>
</ul>
</blockquote>
</li>
<li>
<p>设置电子邮件通知</p>
<ul>
<li>以后再说</li>
</ul>
</li>
<li>
<p>选择 中文(中国)[默认]</p>
</li>
<li>
<p>选择头像</p>
</li>
<li>
<p>开始体验 Jira</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <!-- Share to Twitter, Weibo, Telegram -->
        <div class="flex items-center">
          <div class="mr-4 flex items-center">
            <i class="ri-share-forward-line text-gray-500"></i>
          </div>
          <div class="px-4 cursor-pointer text-blue-500 hover:bg-blue-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTwitter">
            <i class="ri-twitter-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-red-500 hover:bg-red-100 dark:hover:bg-gray-600 inline-flex" @click="shareToWeibo">
            <i class="ri-weibo-line"></i>
          </div>
          <div class="px-4 cursor-pointer text-indigo-500 hover:bg-indigo-100 dark:hover:bg-gray-600 inline-flex" @click="shareToTelegram">
            <i class="ri-telegram-line"></i>
          </div>
        </div>
      </div>

      

      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  Copied by <a href="https://0ct.github.io/" target="_blank">Decima</a> | Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li><a href="#%E5%AE%89%E8%A3%85-jira-%E5%92%8C-confluence%E5%AE%89%E8%A3%85-jira">安装 Jira 和 Confluence：安装 Jira</a><br>
*
<ul>
<li><a href="#1-%E4%B8%8B%E8%BD%BD">1. 下载</a></li>
<li><a href="#2-%E5%AE%89%E8%A3%85">2. 安装</a></li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://blog.decima.me/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
  
</body>

</html>